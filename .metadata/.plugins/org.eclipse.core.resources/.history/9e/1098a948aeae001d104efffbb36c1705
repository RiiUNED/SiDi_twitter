package cliente;

import java.io.*;
import java.rmi.*;
import java.rmi.registry.Registry;
import java.util.Scanner;

import Comun.ServerInt;
import Comun.Usuario;

/*
 * La clase representa un cliente de objeto distribuido
 * @autor: rsanchez628@alumno.uned.es
 */

public class Cliente {
	
	public static void main(String[] args) {
		
		int puerto = Registry.REGISTRY_PORT;
		
		try {
			
			//Se comunica con la interfaz
			String registro = "rmi://localhost:" + puerto + "/" + ServerInt.class.getCanonicalName();
			ServerInt h = (ServerInt)Naming.lookup(registro);
			
			gui(h);
			
		} catch (Exception e) {
			
			System.out.println("Excepcion: " + e);
			
		}		
	}
	
	/*
	 * ofrece interfaz al usuario
	 * @autor: rsanchez@alumno.uned.es
	 * 			Ricardo Sanchez
	 */
	public static void gui(ServerInt h) {
		Scanner scanner = new Scanner(System.in);

        System.out.println("Bienvenido al servicio de autenticación");
        System.out.println("Elija una opción:");
        System.out.println("1. Autenticarse");
        System.out.println("2. Salir");

        int opcion = scanner.nextInt();
        scanner.nextLine();

        switch (opcion) {
            case 1:
                // Código para autenticar al usuario
            	System.out.println("Introduzca el nombre: ");
            	String name = scanner.nextLine();
            	System.out.println(name);
            	System.out.println("Introduzca el nick: ");
            	String n = scanner.nextLine();
            	System.out.println("Introduzca la contraseña: ");
            	String p = scanner.nextLine();
				try {
					h.autenticarse(name, n, p);
				} catch (RemoteException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
                System.out.println("Autenticando al usuario...");
                break;
            case 2:
                // Código para salir del servicio
                System.out.println("Saliendo del servicio...");
                break;
            default:
                System.out.println("Opción no válida.");
                break;
        }
    
	}
}
